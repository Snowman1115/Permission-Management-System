<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pms.mapper.PermissionMapper">

    <select id="getPermissionListByUserId" resultType="com.pms.entity.Permission">
        SELECT DISTINCT p5.id, p5.name, p5.pid, p5.label, p5.code, p5.url, p5.type, p5.icon, p5.remark, p5.path FROM pms_user p1
             LEFT JOIN pms_user_role p2 on p2.user_id = p1.id
             LEFT JOIN pms_role p3 on p3.id = p2.role_id
             LEFT JOIN pms_role_permission p4 on p4.role_id = p3.id
             LEFT JOIN pms_permission p5 on p5.id = p4.permission_id
        WHERE p1.id = #{userId}
        ORDER BY p5.id
    </select>

</mapper>
